{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../app/dashboard/page.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { useAuth } from \"../lib/auth-context\";\nimport { apiFetch } from \"../lib/api\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\n\nexport default function DashboardPage() {\n  const { user, token, loading, logout } = useAuth();\n  const router = useRouter();\n\n  const [workspaces, setWorkspaces] = useState([]);\n  const [loadingWs, setLoadingWs] = useState(true);\n  const [newName, setNewName] = useState(\"\");\n  const [creating, setCreating] = useState(false);\n\n  useEffect(() => {\n    if (!loading && !user) router.replace(\"/login\");\n  }, [user, loading, router]);\n\n  const loadWorkspaces = useCallback(async () => {\n    if (!token) return;\n    try {\n      const data = await apiFetch(\"/api/workspaces\", {}, token);\n      setWorkspaces(data.workspaces || []);\n    } catch {\n      // silent\n    } finally {\n      setLoadingWs(false);\n    }\n  }, [token]);\n\n  useEffect(() => { loadWorkspaces(); }, [loadWorkspaces]);\n\n  async function handleCreate(e) {\n    e.preventDefault();\n    if (!newName.trim() || creating) return;\n    setCreating(true);\n    try {\n      const data = await apiFetch(\n        \"/api/workspaces\",\n        { method: \"POST\", body: JSON.stringify({ name: newName.trim() }) },\n        token\n      );\n      setNewName(\"\");\n      router.push(`/dashboard/${data.workspace.id}`);\n    } catch {\n      // silent\n    } finally {\n      setCreating(false);\n    }\n  }\n\n  if (loading || !user) return null;\n\n  return (\n    <div className=\"mx-auto min-h-screen max-w-2xl px-6 py-12\">\n      <header className=\"flex items-center justify-between\">\n        <h1 className=\"text-lg font-semibold\">Synthesis</h1>\n        <button\n          onClick={logout}\n          className=\"text-xs text-[var(--muted)] transition hover:text-[var(--fg)]\"\n        >\n          Log out\n        </button>\n      </header>\n\n      {/* New workspace */}\n      <form onSubmit={handleCreate} className=\"mt-10 flex gap-2\">\n        <input\n          type=\"text\"\n          value={newName}\n          onChange={(e) => setNewName(e.target.value)}\n          placeholder=\"New workspace…\"\n          className=\"flex-1 border-b border-[var(--border)] bg-transparent py-2 text-sm outline-none placeholder:text-[var(--muted)] focus:border-[var(--fg)]\"\n        />\n        <button\n          type=\"submit\"\n          disabled={creating || !newName.trim()}\n          className=\"rounded-lg bg-[var(--fg)] px-4 py-2 text-xs font-medium text-white transition hover:opacity-80 disabled:opacity-30\"\n        >\n          Create\n        </button>\n      </form>\n\n      {/* List */}\n      {loadingWs ? (\n        <p className=\"mt-12 text-center text-sm text-[var(--muted)]\">Loading…</p>\n      ) : workspaces.length === 0 ? (\n        <p className=\"mt-16 text-center text-sm text-[var(--muted)]\">\n          No workspaces yet. Create one above.\n        </p>\n      ) : (\n        <div className=\"mt-8 divide-y divide-[var(--border)]\">\n          {workspaces.map((ws) => (\n            <Link\n              key={ws.id}\n              href={`/dashboard/${ws.id}`}\n              className=\"group flex items-center justify-between py-3 transition\"\n            >\n              <div>\n                <p className=\"text-sm font-medium group-hover:text-[var(--fg)]\">\n                  {ws.name}\n                </p>\n                {ws.description && (\n                  <p className=\"mt-0.5 text-xs text-[var(--muted)] line-clamp-1\">\n                    {ws.description}\n                  </p>\n                )}\n              </div>\n              <span className=\"text-xs text-[var(--muted)]\">\n                {ws._count?.items || 0} docs\n              </span>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3]}