{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/laphatize/Documents/synthesis/frontend/app/dashboard/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { useAuth } from \"../lib/auth-context\";\nimport { apiFetch } from \"../lib/api\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\n\nexport default function DashboardPage() {\n  const { user, token, loading, logout } = useAuth();\n  const router = useRouter();\n\n  const [workspaces, setWorkspaces] = useState([]);\n  const [loadingWs, setLoadingWs] = useState(true);\n  const [newName, setNewName] = useState(\"\");\n  const [creating, setCreating] = useState(false);\n\n  useEffect(() => {\n    if (!loading && !user) router.replace(\"/login\");\n  }, [user, loading, router]);\n\n  const loadWorkspaces = useCallback(async () => {\n    if (!token) return;\n    try {\n      const data = await apiFetch(\"/api/workspaces\", {}, token);\n      setWorkspaces(data.workspaces || []);\n    } catch {\n      // silent\n    } finally {\n      setLoadingWs(false);\n    }\n  }, [token]);\n\n  useEffect(() => { loadWorkspaces(); }, [loadWorkspaces]);\n\n  async function handleCreate(e) {\n    e.preventDefault();\n    if (!newName.trim() || creating) return;\n    setCreating(true);\n    try {\n      const data = await apiFetch(\n        \"/api/workspaces\",\n        { method: \"POST\", body: JSON.stringify({ name: newName.trim() }) },\n        token\n      );\n      setNewName(\"\");\n      router.push(`/dashboard/${data.workspace.id}`);\n    } catch {\n      // silent\n    } finally {\n      setCreating(false);\n    }\n  }\n\n  if (loading || !user) return null;\n\n  return (\n    <div className=\"mx-auto min-h-screen max-w-2xl px-6 py-12\">\n      <header className=\"flex items-center justify-between\">\n        <h1 className=\"text-lg font-semibold\">Synthesis</h1>\n        <button\n          onClick={logout}\n          className=\"text-xs text-[var(--muted)] transition hover:text-[var(--fg)]\"\n        >\n          Log out\n        </button>\n      </header>\n\n      {/* New workspace */}\n      <form onSubmit={handleCreate} className=\"mt-10 flex gap-2\">\n        <input\n          type=\"text\"\n          value={newName}\n          onChange={(e) => setNewName(e.target.value)}\n          placeholder=\"New workspace…\"\n          className=\"flex-1 border-b border-[var(--border)] bg-transparent py-2 text-sm outline-none placeholder:text-[var(--muted)] focus:border-[var(--fg)]\"\n        />\n        <button\n          type=\"submit\"\n          disabled={creating || !newName.trim()}\n          className=\"rounded-lg bg-[var(--fg)] px-4 py-2 text-xs font-medium text-white transition hover:opacity-80 disabled:opacity-30\"\n        >\n          Create\n        </button>\n      </form>\n\n      {/* List */}\n      {loadingWs ? (\n        <p className=\"mt-12 text-center text-sm text-[var(--muted)]\">Loading…</p>\n      ) : workspaces.length === 0 ? (\n        <p className=\"mt-16 text-center text-sm text-[var(--muted)]\">\n          No workspaces yet. Create one above.\n        </p>\n      ) : (\n        <div className=\"mt-8 divide-y divide-[var(--border)]\">\n          {workspaces.map((ws) => (\n            <Link\n              key={ws.id}\n              href={`/dashboard/${ws.id}`}\n              className=\"group flex items-center justify-between py-3 transition\"\n            >\n              <div>\n                <p className=\"text-sm font-medium group-hover:text-[var(--fg)]\">\n                  {ws.name}\n                </p>\n                {ws.description && (\n                  <p className=\"mt-0.5 text-xs text-[var(--muted)] line-clamp-1\">\n                    {ws.description}\n                  </p>\n                )}\n              </div>\n              <span className=\"text-xs text-[var(--muted)]\">\n                {ws._count?.items || 0} docs\n              </span>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,wIAAO;IAChD,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,WAAW,CAAC,MAAM,OAAO,OAAO,CAAC;IACxC,GAAG;QAAC;QAAM;QAAS;KAAO;IAE1B,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,IAAI,CAAC,OAAO;QACZ,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,6HAAQ,EAAC,mBAAmB,CAAC,GAAG;YACnD,cAAc,KAAK,UAAU,IAAI,EAAE;QACrC,EAAE,OAAM;QACN,SAAS;QACX,SAAU;YACR,aAAa;QACf;IACF,GAAG;QAAC;KAAM;IAEV,IAAA,kNAAS,EAAC;QAAQ;IAAkB,GAAG;QAAC;KAAe;IAEvD,eAAe,aAAa,CAAC;QAC3B,EAAE,cAAc;QAChB,IAAI,CAAC,QAAQ,IAAI,MAAM,UAAU;QACjC,YAAY;QACZ,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,6HAAQ,EACzB,mBACA;gBAAE,QAAQ;gBAAQ,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM,QAAQ,IAAI;gBAAG;YAAG,GACjE;YAEF,WAAW;YACX,OAAO,IAAI,CAAC,CAAC,WAAW,EAAE,KAAK,SAAS,CAAC,EAAE,EAAE;QAC/C,EAAE,OAAM;QACN,SAAS;QACX,SAAU;YACR,YAAY;QACd;IACF;IAEA,IAAI,WAAW,CAAC,MAAM,OAAO;IAE7B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAG,WAAU;kCAAwB;;;;;;kCACtC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;0BAMH,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,8OAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wBAC1C,aAAY;wBACZ,WAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAK;wBACL,UAAU,YAAY,CAAC,QAAQ,IAAI;wBACnC,WAAU;kCACX;;;;;;;;;;;;YAMF,0BACC,8OAAC;gBAAE,WAAU;0BAAgD;;;;;uBAC3D,WAAW,MAAM,KAAK,kBACxB,8OAAC;gBAAE,WAAU;0BAAgD;;;;;qCAI7D,8OAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAC,mBACf,8OAAC,uKAAI;wBAEH,MAAM,CAAC,WAAW,EAAE,GAAG,EAAE,EAAE;wBAC3B,WAAU;;0CAEV,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDACV,GAAG,IAAI;;;;;;oCAET,GAAG,WAAW,kBACb,8OAAC;wCAAE,WAAU;kDACV,GAAG,WAAW;;;;;;;;;;;;0CAIrB,8OAAC;gCAAK,WAAU;;oCACb,GAAG,MAAM,EAAE,SAAS;oCAAE;;;;;;;;uBAfpB,GAAG,EAAE;;;;;;;;;;;;;;;;AAuBxB"}}]
}