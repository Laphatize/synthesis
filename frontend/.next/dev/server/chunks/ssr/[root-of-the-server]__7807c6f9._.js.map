{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/laphatize/Documents/synthesis/frontend/app/lib/use-arxiv.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport { apiFetch } from \"./api\";\n\n/**\n * Extracts meaningful keywords from editor plain text.\n * Strips very short / common words, returns top terms by frequency.\n */\nfunction extractQuery(text, maxWords = 6) {\n  const stop = new Set([\n    \"the\", \"a\", \"an\", \"and\", \"or\", \"but\", \"is\", \"are\", \"was\", \"were\",\n    \"be\", \"been\", \"being\", \"have\", \"has\", \"had\", \"do\", \"does\", \"did\",\n    \"will\", \"would\", \"shall\", \"should\", \"may\", \"might\", \"must\", \"can\",\n    \"could\", \"to\", \"of\", \"in\", \"for\", \"on\", \"with\", \"at\", \"by\", \"from\",\n    \"as\", \"into\", \"through\", \"during\", \"before\", \"after\", \"above\",\n    \"below\", \"between\", \"out\", \"off\", \"over\", \"under\", \"again\", \"further\",\n    \"then\", \"once\", \"here\", \"there\", \"when\", \"where\", \"why\", \"how\", \"all\",\n    \"each\", \"every\", \"both\", \"few\", \"more\", \"most\", \"other\", \"some\",\n    \"such\", \"no\", \"nor\", \"not\", \"only\", \"own\", \"same\", \"so\", \"than\",\n    \"too\", \"very\", \"just\", \"because\", \"if\", \"about\", \"up\", \"its\", \"it\",\n    \"this\", \"that\", \"these\", \"those\", \"i\", \"we\", \"you\", \"he\", \"she\",\n    \"they\", \"me\", \"him\", \"her\", \"us\", \"them\", \"my\", \"your\", \"his\",\n    \"our\", \"their\", \"what\", \"which\", \"who\", \"whom\", \"while\", \"also\",\n    \"new\", \"one\", \"two\", \"like\", \"get\", \"make\", \"go\", \"know\", \"take\",\n    \"see\", \"come\", \"think\", \"look\", \"want\", \"give\", \"use\", \"find\",\n    \"tell\", \"ask\", \"work\", \"seem\", \"feel\", \"try\", \"leave\", \"call\",\n  ]);\n\n  const words = text\n    .toLowerCase()\n    .replace(/[^a-z0-9\\s-]/g, \" \")\n    .split(/\\s+/)\n    .filter((w) => w.length > 2 && !stop.has(w));\n\n  // Frequency count\n  const freq = {};\n  for (const w of words) {\n    freq[w] = (freq[w] || 0) + 1;\n  }\n\n  return Object.entries(freq)\n    .sort((a, b) => b[1] - a[1])\n    .slice(0, maxWords)\n    .map(([w]) => w)\n    .join(\" \");\n}\n\n/**\n * Hook: watches editor plain text, debounces, queries ArXiv.\n * Returns { papers, loading, query }\n */\nexport function useArxivSuggestions(plainText, { delay = 2000, minLength = 30 } = {}) {\n  const [papers, setPapers] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [query, setQuery] = useState(\"\");\n  const timerRef = useRef(null);\n  const lastQueryRef = useRef(\"\");\n  const abortRef = useRef(null);\n\n  const search = useCallback(async (q) => {\n    if (!q || q === lastQueryRef.current) return;\n    lastQueryRef.current = q;\n    setQuery(q);\n    setLoading(true);\n\n    // Abort any in-flight request\n    if (abortRef.current) abortRef.current.abort();\n    const controller = new AbortController();\n    abortRef.current = controller;\n\n    try {\n      const data = await apiFetch(`/api/arxiv/search?q=${encodeURIComponent(q)}&max=6`);\n      if (!controller.signal.aborted) {\n        setPapers(data.papers || []);\n      }\n    } catch {\n      if (!controller.signal.aborted) setPapers([]);\n    } finally {\n      if (!controller.signal.aborted) setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    clearTimeout(timerRef.current);\n\n    if (!plainText || plainText.length < minLength) {\n      setPapers([]);\n      setQuery(\"\");\n      return;\n    }\n\n    timerRef.current = setTimeout(() => {\n      const q = extractQuery(plainText);\n      if (q.trim()) search(q);\n    }, delay);\n\n    return () => clearTimeout(timerRef.current);\n  }, [plainText, delay, minLength, search]);\n\n  return { papers, loading, query };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/laphatize/Documents/synthesis/frontend/app/components/Editor.js"],"sourcesContent":["\"use client\";\n\nimport { useEditor, EditorContent } from \"@tiptap/react\";\nimport StarterKit from \"@tiptap/starter-kit\";\nimport Placeholder from \"@tiptap/extension-placeholder\";\nimport Typography from \"@tiptap/extension-typography\";\nimport { useEffect, useRef } from \"react\";\n\nexport default function Editor({ content, onUpdate, onTextChange, placeholder = \"Start writing‚Ä¶\" }) {\n  const debounceRef = useRef(null);\n\n  const editor = useEditor({\n    immediatelyRender: false,\n    extensions: [\n      StarterKit.configure({\n        heading: { levels: [1, 2, 3] },\n        codeBlock: { HTMLAttributes: { class: \"code-block\" } },\n      }),\n      Placeholder.configure({ placeholder }),\n      Typography,\n    ],\n    content: content || \"\",\n    editorProps: {\n      attributes: {\n        class: \"tiptap\",\n      },\n    },\n    onUpdate: ({ editor }) => {\n      if (!onUpdate) return;\n      // Debounce saves\n      clearTimeout(debounceRef.current);\n      debounceRef.current = setTimeout(() => {\n        onUpdate(editor.getHTML());\n      }, 500);\n      // Plain text for AI features (immediate)\n      if (onTextChange) onTextChange(editor.getText());\n    },\n  });\n\n  // Sync external content changes (e.g. loading a different doc)\n  useEffect(() => {\n    if (editor && content !== undefined && editor.getHTML() !== content) {\n      editor.commands.setContent(content || \"\");\n    }\n  }, [content, editor]);\n\n  if (!editor) return null;\n\n  return (\n    <div className=\"flex flex-1 flex-col\">\n      {/* Minimal toolbar */}\n      <div className=\"flex items-center gap-0.5 border-b border-[var(--border)] px-1 py-1\">\n        <ToolBtn\n          active={editor.isActive(\"bold\")}\n          onClick={() => editor.chain().focus().toggleBold().run()}\n          label=\"B\"\n          className=\"font-bold\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"italic\")}\n          onClick={() => editor.chain().focus().toggleItalic().run()}\n          label=\"I\"\n          className=\"italic\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"strike\")}\n          onClick={() => editor.chain().focus().toggleStrike().run()}\n          label=\"S\"\n          className=\"line-through\"\n        />\n        <Sep />\n        <ToolBtn\n          active={editor.isActive(\"heading\", { level: 1 })}\n          onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}\n          label=\"H1\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"heading\", { level: 2 })}\n          onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}\n          label=\"H2\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"heading\", { level: 3 })}\n          onClick={() => editor.chain().focus().toggleHeading({ level: 3 }).run()}\n          label=\"H3\"\n        />\n        <Sep />\n        <ToolBtn\n          active={editor.isActive(\"bulletList\")}\n          onClick={() => editor.chain().focus().toggleBulletList().run()}\n          label=\"‚Ä¢\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"orderedList\")}\n          onClick={() => editor.chain().focus().toggleOrderedList().run()}\n          label=\"1.\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"blockquote\")}\n          onClick={() => editor.chain().focus().toggleBlockquote().run()}\n          label=\"‚ùù\"\n        />\n        <ToolBtn\n          active={editor.isActive(\"codeBlock\")}\n          onClick={() => editor.chain().focus().toggleCodeBlock().run()}\n          label=\"<>\"\n          className=\"font-mono text-[10px]\"\n        />\n        <Sep />\n        <ToolBtn\n          onClick={() => editor.chain().focus().setHorizontalRule().run()}\n          label=\"‚Äî\"\n        />\n      </div>\n\n      {/* Editor area */}\n      <div className=\"flex-1 overflow-y-auto px-6 py-4 sm:px-10 md:px-16 lg:px-24\">\n        <div className=\"mx-auto max-w-2xl\">\n          <EditorContent editor={editor} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ToolBtn({ active, onClick, label, className = \"\" }) {\n  return (\n    <button\n      type=\"button\"\n      onMouseDown={(e) => e.preventDefault()}\n      onClick={onClick}\n      className={`rounded px-2 py-1 text-xs transition ${className} ${\n        active\n          ? \"bg-[var(--fg)] text-white\"\n          : \"text-[var(--muted)] hover:bg-[#f0f0f0] hover:text-[var(--fg)]\"\n      }`}\n    >\n      {label}\n    </button>\n  );\n}\n\nfunction Sep() {\n  return <div className=\"mx-1 h-4 w-px bg-[var(--border)]\" />;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 501, "column": 0}, "map": {"version":3,"sources":["file:///Users/laphatize/Documents/synthesis/frontend/app/components/PapersSidebar.js"],"sourcesContent":["\"use client\";\n\nexport default function PapersSidebar({ papers, loading, query, open, onToggle }) {\n  return (\n    <aside\n      className={`flex flex-col border-l border-[var(--border)] bg-[var(--surface)] transition-all ${\n        open ? \"w-80\" : \"w-0 overflow-hidden\"\n      }`}\n    >\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-[var(--border)]\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-xs font-semibold tracking-wide uppercase text-[var(--muted)]\">\n            Papers\n          </span>\n          {loading && (\n            <span className=\"papers-loader\" />\n          )}\n        </div>\n        <button\n          onClick={onToggle}\n          className=\"text-xs text-[var(--muted)] hover:text-[var(--fg)] transition\"\n        >\n          ‚úï\n        </button>\n      </div>\n\n      {query && (\n        <div className=\"px-4 py-2 border-b border-[var(--border)]\">\n          <p className=\"text-[10px] text-[var(--muted)] truncate\">\n            Searching: <span className=\"text-[var(--fg)]\">{query}</span>\n          </p>\n        </div>\n      )}\n\n      <div className=\"flex-1 overflow-y-auto\">\n        {papers.length === 0 && !loading ? (\n          <div className=\"px-4 py-8 text-center\">\n            <p className=\"text-xs text-[var(--muted)]\">\n              {query\n                ? \"No papers found for this topic.\"\n                : \"Start writing to discover relevant research papers.\"}\n            </p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-[var(--border)]\">\n            {papers.map((paper) => (\n              <PaperCard key={paper.id} paper={paper} />\n            ))}\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n}\n\nfunction PaperCard({ paper }) {\n  return (\n    <div className=\"px-4 py-3 hover:bg-[#fafafa] transition group\">\n      <a\n        href={paper.absUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"block\"\n      >\n        <h4 className=\"text-xs font-medium leading-snug mb-1 group-hover:text-blue-700 transition\">\n          {paper.title}\n        </h4>\n      </a>\n\n      <p className=\"text-[10px] text-[var(--muted)] mb-1.5 leading-relaxed\">\n        {paper.summary}\n      </p>\n\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        <span className=\"text-[10px] text-[var(--muted)]\">\n          {paper.authors.join(\", \")}\n          {paper.authors.length >= 4 && \" et al.\"}\n        </span>\n        <span className=\"text-[10px] text-[var(--muted)]\">¬∑</span>\n        <span className=\"text-[10px] text-[var(--muted)]\">{paper.published}</span>\n      </div>\n\n      <div className=\"flex items-center gap-2 mt-1.5\">\n        {paper.categories.map((cat) => (\n          <span\n            key={cat}\n            className=\"text-[9px] px-1.5 py-0.5 rounded bg-[#f0f0f0] text-[var(--muted)]\"\n          >\n            {cat}\n          </span>\n        ))}\n        {paper.pdfUrl && (\n          <a\n            href={paper.pdfUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-[9px] px-1.5 py-0.5 rounded bg-[#f0f0f0] text-[var(--fg)] hover:bg-[#e0e0e0] transition ml-auto\"\n          >\n            PDF ‚Üó\n          </a>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAEe,SAAS,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE;IAC9E,qBACE,8OAAC;QACC,WAAW,CAAC,iFAAiF,EAC3F,OAAO,SAAS,uBAChB;;0BAEF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CAAoE;;;;;;4BAGnF,yBACC,8OAAC;gCAAK,WAAU;;;;;;;;;;;;kCAGpB,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAKF,uBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;;wBAA2C;sCAC3C,8OAAC;4BAAK,WAAU;sCAAoB;;;;;;;;;;;;;;;;;0BAKrD,8OAAC;gBAAI,WAAU;0BACZ,OAAO,MAAM,KAAK,KAAK,CAAC,wBACvB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCACV,QACG,oCACA;;;;;;;;;;yCAIR,8OAAC;oBAAI,WAAU;8BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;4BAAyB,OAAO;2BAAjB,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;AAOtC;AAEA,SAAS,UAAU,EAAE,KAAK,EAAE;IAC1B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,MAAM,MAAM,MAAM;gBAClB,QAAO;gBACP,KAAI;gBACJ,WAAU;0BAEV,cAAA,8OAAC;oBAAG,WAAU;8BACX,MAAM,KAAK;;;;;;;;;;;0BAIhB,8OAAC;gBAAE,WAAU;0BACV,MAAM,OAAO;;;;;;0BAGhB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;;4BACb,MAAM,OAAO,CAAC,IAAI,CAAC;4BACnB,MAAM,OAAO,CAAC,MAAM,IAAI,KAAK;;;;;;;kCAEhC,8OAAC;wBAAK,WAAU;kCAAkC;;;;;;kCAClD,8OAAC;wBAAK,WAAU;kCAAmC,MAAM,SAAS;;;;;;;;;;;;0BAGpE,8OAAC;gBAAI,WAAU;;oBACZ,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,oBACrB,8OAAC;4BAEC,WAAU;sCAET;2BAHI;;;;;oBAMR,MAAM,MAAM,kBACX,8OAAC;wBACC,MAAM,MAAM,MAAM;wBAClB,QAAO;wBACP,KAAI;wBACJ,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 726, "column": 0}, "map": {"version":3,"sources":["file:///Users/laphatize/Documents/synthesis/frontend/app/dashboard/%5Bid%5D/page.js"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback, useRef } from \"react\";\nimport { useAuth } from \"../../lib/auth-context\";\nimport { apiFetch } from \"../../lib/api\";\nimport { useArxivSuggestions } from \"../../lib/use-arxiv\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport Editor from \"../../components/Editor\";\nimport PapersSidebar from \"../../components/PapersSidebar\";\n\nexport default function WorkspacePage() {\n  const { user, token, loading } = useAuth();\n  const router = useRouter();\n  const params = useParams();\n  const workspaceId = params.id;\n\n  const [workspace, setWorkspace] = useState(null);\n  const [items, setItems] = useState([]);\n  const [activeItemId, setActiveItemId] = useState(null);\n  const [loadingWs, setLoadingWs] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [papersOpen, setPapersOpen] = useState(true);\n  const [editorText, setEditorText] = useState(\"\");\n\n  const { papers, loading: papersLoading, query: papersQuery } = useArxivSuggestions(editorText);\n\n  useEffect(() => {\n    if (!loading && !user) router.replace(\"/login\");\n  }, [user, loading, router]);\n\n  const loadWorkspace = useCallback(async () => {\n    if (!token || !workspaceId) return;\n    try {\n      const [wsData, itemsData] = await Promise.all([\n        apiFetch(`/api/workspaces/${workspaceId}`, {}, token),\n        apiFetch(`/api/workspaces/${workspaceId}/items`, {}, token),\n      ]);\n      setWorkspace(wsData.workspace);\n      const fetchedItems = itemsData.items || [];\n      setItems(fetchedItems);\n      // Auto-select first doc\n      if (fetchedItems.length && !activeItemId) {\n        setActiveItemId(fetchedItems[0].id);\n      }\n    } catch {\n      // silent\n    } finally {\n      setLoadingWs(false);\n    }\n  }, [token, workspaceId, activeItemId]);\n\n  useEffect(() => { loadWorkspace(); }, [loadWorkspace]);\n\n  const activeItem = items.find((i) => i.id === activeItemId) || null;\n\n  async function handleCreateDoc() {\n    try {\n      const data = await apiFetch(\n        `/api/workspaces/${workspaceId}/items`,\n        {\n          method: \"POST\",\n          body: JSON.stringify({\n            type: \"note\",\n            title: \"Untitled\",\n            content: \"\",\n            autoEmbed: false,\n          }),\n        },\n        token\n      );\n      setItems((prev) => [data.item, ...prev]);\n      setActiveItemId(data.item.id);\n    } catch {\n      // silent\n    }\n  }\n\n  async function handleUpdateContent(html) {\n    if (!activeItemId) return;\n    setSaving(true);\n    // Optimistically update local state\n    setItems((prev) =>\n      prev.map((i) => (i.id === activeItemId ? { ...i, content: html } : i))\n    );\n    try {\n      await apiFetch(\n        `/api/workspaces/${workspaceId}/items/${activeItemId}`,\n        { method: \"PATCH\", body: JSON.stringify({ content: html }) },\n        token\n      );\n    } catch {\n      // silent\n    } finally {\n      setSaving(false);\n    }\n  }\n\n  async function handleRenameItem(itemId, newTitle) {\n    setItems((prev) =>\n      prev.map((i) => (i.id === itemId ? { ...i, title: newTitle } : i))\n    );\n    try {\n      await apiFetch(\n        `/api/workspaces/${workspaceId}/items/${itemId}`,\n        { method: \"PATCH\", body: JSON.stringify({ title: newTitle }) },\n        token\n      );\n    } catch {\n      // silent\n    }\n  }\n\n  async function handleDeleteItem(itemId) {\n    setItems((prev) => prev.filter((i) => i.id !== itemId));\n    if (activeItemId === itemId) {\n      const remaining = items.filter((i) => i.id !== itemId);\n      setActiveItemId(remaining.length ? remaining[0].id : null);\n    }\n    try {\n      await apiFetch(\n        `/api/workspaces/${workspaceId}/items/${itemId}`,\n        { method: \"DELETE\" },\n        token\n      );\n    } catch {\n      // silent\n    }\n  }\n\n  if (loading || !user) return null;\n\n  if (loadingWs) {\n    return (\n      <div className=\"flex min-h-screen items-center justify-center\">\n        <p className=\"text-sm text-[var(--muted)]\">Loading‚Ä¶</p>\n      </div>\n    );\n  }\n\n  if (!workspace) {\n    return (\n      <div className=\"flex min-h-screen flex-col items-center justify-center gap-2\">\n        <p className=\"text-sm text-[var(--muted)]\">Workspace not found</p>\n        <Link href=\"/dashboard\" className=\"text-xs underline\">Back</Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-screen overflow-hidden\">\n      {/* Sidebar */}\n      <aside\n        className={`flex flex-col border-r border-[var(--border)] bg-[var(--surface)] transition-all ${\n          sidebarOpen ? \"w-60\" : \"w-0 overflow-hidden\"\n        }`}\n      >\n        <div className=\"flex items-center justify-between px-4 py-3\">\n          <Link\n            href=\"/dashboard\"\n            className=\"text-xs text-[var(--muted)] transition hover:text-[var(--fg)]\"\n          >\n            ‚Üê Back\n          </Link>\n          <button\n            onClick={handleCreateDoc}\n            className=\"text-xs font-medium text-[var(--fg)] transition hover:opacity-60\"\n          >\n            + New\n          </button>\n        </div>\n\n        <div className=\"px-4 pb-2\">\n          <p className=\"truncate text-sm font-medium\">{workspace.name}</p>\n        </div>\n\n        <nav className=\"flex-1 overflow-y-auto\">\n          {items.length === 0 ? (\n            <p className=\"px-4 py-6 text-center text-xs text-[var(--muted)]\">\n              No docs yet\n            </p>\n          ) : (\n            items.map((item) => (\n              <SidebarItem\n                key={item.id}\n                item={item}\n                active={item.id === activeItemId}\n                onSelect={() => setActiveItemId(item.id)}\n                onRename={(title) => handleRenameItem(item.id, title)}\n                onDelete={() => handleDeleteItem(item.id)}\n              />\n            ))\n          )}\n        </nav>\n      </aside>\n\n      {/* Main */}\n      <main className=\"flex flex-1 flex-col overflow-hidden\">\n        {/* Top bar */}\n        <div className=\"flex items-center justify-between border-b border-[var(--border)] px-4 py-2\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={() => setSidebarOpen(!sidebarOpen)}\n              className=\"text-xs text-[var(--muted)] transition hover:text-[var(--fg)]\"\n            >\n              {sidebarOpen ? \"‚óÅ\" : \"‚ñ∑\"}\n            </button>\n            {activeItem && (\n              <span className=\"text-sm font-medium\">{activeItem.title || \"Untitled\"}</span>\n            )}\n          </div>\n          <div className=\"flex items-center gap-3\">\n            {saving && (\n              <span className=\"text-[10px] text-[var(--muted)]\">Saving‚Ä¶</span>\n            )}\n            <button\n              onClick={() => setPapersOpen(!papersOpen)}\n              className={`text-xs transition ${\n                papersOpen ? \"text-[var(--fg)]\" : \"text-[var(--muted)] hover:text-[var(--fg)]\"\n              }`}\n              title=\"Toggle research papers\"\n            >\n              üìÑ Papers\n            </button>\n          </div>\n        </div>\n\n        {/* Editor */}\n        {activeItem ? (\n          <Editor\n            key={activeItemId}\n            content={activeItem.content || \"\"}\n            onUpdate={handleUpdateContent}\n            onTextChange={setEditorText}\n            placeholder=\"Start writing‚Ä¶\"\n          />\n        ) : (\n          <div className=\"flex flex-1 items-center justify-center\">\n            <div className=\"text-center\">\n              <p className=\"text-sm text-[var(--muted)]\">\n                {items.length === 0\n                  ? \"Create a doc to get started\"\n                  : \"Select a doc from the sidebar\"}\n              </p>\n              {items.length === 0 && (\n                <button\n                  onClick={handleCreateDoc}\n                  className=\"mt-3 rounded-lg bg-[var(--fg)] px-4 py-2 text-xs font-medium text-white transition hover:opacity-80\"\n                >\n                  New doc\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n      </main>\n\n      {/* Research papers sidebar */}\n      <PapersSidebar\n        papers={papers}\n        loading={papersLoading}\n        query={papersQuery}\n        open={papersOpen}\n        onToggle={() => setPapersOpen(false)}\n      />\n    </div>\n  );\n}\n\nfunction SidebarItem({ item, active, onSelect, onRename, onDelete }) {\n  const [editing, setEditing] = useState(false);\n  const [title, setTitle] = useState(item.title || \"Untitled\");\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (editing && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [editing]);\n\n  function commitRename() {\n    setEditing(false);\n    const trimmed = title.trim() || \"Untitled\";\n    setTitle(trimmed);\n    if (trimmed !== item.title) onRename(trimmed);\n  }\n\n  return (\n    <div\n      className={`group flex items-center gap-1 px-4 py-1.5 text-sm transition cursor-pointer ${\n        active ? \"bg-[#f0f0f0] font-medium\" : \"text-[var(--muted)] hover:bg-[#f8f8f8]\"\n      }`}\n      onClick={onSelect}\n    >\n      {editing ? (\n        <input\n          ref={inputRef}\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n          onBlur={commitRename}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\") commitRename();\n            if (e.key === \"Escape\") { setTitle(item.title || \"Untitled\"); setEditing(false); }\n          }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"flex-1 bg-transparent text-sm outline-none\"\n        />\n      ) : (\n        <span className=\"flex-1 truncate\">{item.title || \"Untitled\"}</span>\n      )}\n\n      <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition\">\n        <button\n          onClick={(e) => { e.stopPropagation(); setEditing(true); }}\n          className=\"text-[10px] text-[var(--muted)] hover:text-[var(--fg)]\"\n          title=\"Rename\"\n        >\n          ‚úé\n        </button>\n        <button\n          onClick={(e) => { e.stopPropagation(); onDelete(); }}\n          className=\"text-[10px] text-[var(--muted)] hover:text-red-500\"\n          title=\"Delete\"\n        >\n          ‚úï\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}